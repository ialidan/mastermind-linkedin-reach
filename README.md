# mastermind-linkedin-reach
A repository for a online Mastermind game, project for the Backend Apprentice Engineer position at LinkedIn Reach.

The goal of this project was aimed to create a Mastermind game that can be played casually or "competitively", by connecting in multiplayer and be matched against the next available opponent. Some of the features that are still to be added is the ability to track the players matches winned and a system to track their "ELO" a rating system to calculate the relative skill level of players in games, as well as an API to track the global top players with more wins or with the highest ELOs.

Mostly, this competitive system tries to follow the pattern of popular competitive games such as "Fortnite" and "Apex Legends" by engaging the users to compete and claim the number one spot.

## Table of Contents
- [Features](#features)
- [Technologies](#technologies)
- [Setup](#setup)
  - [Prerequisites](#prerequisites)
  - [Clone the Repository](#clone-the-repository)
  - [Build the Project](#build-the-project)
  - [Run the Application](#run-the-application)
  - [Accessing the Game](#accessing-the-game)
  
## Features
- **Multiplayer Mode:** Playersor will connect via WebSocket, be added to a queue and be matched against the next available opponent. They will try to guess the random secret code generated by the computer in a set number of turns.
- **Single-player Mode:** One player plays against the computer's randomly generated secret code.
- **Real-time Game Interaction:** Players can guess codes, receive feedback, and view the current game state in real time.
- **Turn-based Gameplay:** Each player takes turns guessing the code, with a limited number of guesses.

## Technologies
- **Spring Boot:** A framework for building Java applications and providing a WebSocket server.
- **WebSockets:** For real-time, bidirectional communication between the game server and players.
- **RestTemplate:** Used to call an external API to generate random numbers for the secret code.
- **Lombok:** A Java library to reduce boilerplate code for getter/setter methods, constructors, etc.

## Setup

### Prerequisites
1. **Java 17 or later:** Make sure you have Java installed. You can check this by running:
  ```
  java -version
  ```
2. **Maven:** This project uses Maven to manage dependencies. If you don't have Maven installed, you can download it from [here](https://maven.apache.org/)

### Clone the Repository
Clone the project repository to your local machine using Git:
```
git clone https://github.com/ialidan/mastermind-linkedin-reach.git
cd mastermind-linkedin-reach
```
### Build the Project
To build the project, run:

```
cd Mastermind_linkedin
mvn clean install
```
### Run the Application
To run the Spring Boot application, use the following command:

```
mvn spring-boot:run
```

By default, the application will start on http://localhost:8080.

Alternatively, you can run this application in your preferred IDE such as IntelliJ or Visual Studio, by opening the project there and running "MastermindApplication" file.

### Accessing the Game
- To play Single-Player mode, open a browser and go to http://localhost:8080/index.html.
  - This URL has a username set to run a game in single player.
- To play Multi-Player mode, in Mastermind_linkedin/users there is a folder containing two simple html files each valid for one user, you can clone as many html files as you need, just edit the file with your preferred text editor and look for the line
```
const ws = new WebSocket('ws://localhost:8080/ws/singleplayer?username=guest2');
```
  - Change the query parameter "username" to any name you want (preferably only characters and numbers)
  

## How to Play
### Single-Player Mode
- After connecting, you’ll be matched with the computer. The computer will generate a secret code.
- You have 10 turns to guess the secret code.
- After each guess, you’ll receive feedback on how many digits are correct, both in terms of their value and position.
- Keep guessing until you either guess the code correctly or run out of turns.

### Multiplayer Mode
- Two players are required to start a multiplayer game.
- The computer will generate a secret code, and each user needs to guess the computer code first before the other user.
- After each guess, the game will provide feedback indicating how many digits are correct and how many digits are in the correct position.
- The first player to guess the secret code correctly wins the game.

## Game Rules
- The secret code is always a sequence of 4 digits (ranging from 0 to 7).
- Each player has 10 turns to guess the code.
- After each guess, feedback will be given to the player showing:
- The number of correct digits in the correct positions.
- The number of correct digits in incorrect positions.
- The game resets if the player guesses the code correctly or runs out of turns.

### Game Feedback Example:
If the secret code is 1234 and the player guesses 1325, the feedback might be:

```
Correct digits: 2 || Correct positions: 1
```
- This means 2 digits are correct, and 1 of them is in the correct position.

## Class structure
### WebSocketConfig
The WebSocketConfig class is responsible for setting up WebSocket endpoints for both single-player and multiplayer modes.

Key Features:
- Endpoint Mapping: Configures two endpoints (/ws/singleplayer and /ws/multiplayer) to handle player connections.
- Allowed Origins: Specifies allowed origins for WebSocket connections, allowing connections from any origin (*).

```
@Configuration
@EnableWebSocket
public class WebSocketConfig implements WebSocketConfigurer {
    @Override
    public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {
        registry.addHandler(new MastermindWebSocketServer(), "/ws/singleplayer")
                .setAllowedOrigins("*");
        registry.addHandler(new MastermindWebSocketServer(), "/ws/multiplayer")
                .setAllowedOrigins("*");
    }
}
```

### GameRoom
The GameRoom class encapsulates the logic for a specific game room, including game state management and turn-based gameplay.

Key Features:
- Room Management: Handles the creation of game rooms and tracks players in each room.
- Game Flow: Manages turns, checks for correct guesses, and provides feedback to players.
- Single-Player Mode: In single-player mode, the game is played against the computer, and the player has to guess the secret code within a certain number of turns.
- Multiplayer Mode: In multiplayer mode, two players take turns guessing the secret code.
- Broadcasting: Sends game updates to all players in the room.

### MastermindWebSocketServer
The MastermindWebSocketServer class manages player connections, room assignments, and game handling. It determines if the connection is for a single-player or multiplayer game based on the URI and query parameters.

Key Features:
- Player Connection: When a player connects, the server checks the username parameter in the query string and ensures the player is not already connected.
- Single-Player Game: If the connection is to /ws/singleplayer, the server creates a single-player game room, assigns the player, and starts the game.
- Multiplayer Game: If the connection is to /ws/multiplayer, the player is added to the waiting queue until another player is available to start a multiplayer game.
- Disconnection Handling: If a player disconnects, the server removes the player from the game room and notifies other players.

### MastermindUtils
The MastermindUtils class provides helper methods for generating secret codes and processing guesses.

Key Features:
- Code Generation: Generates a secret code using the random.org API to get random integers as the secret code.
- Feedback: Compares the player's guess with the secret code and provides feedback on the number of correct digits and positions.
